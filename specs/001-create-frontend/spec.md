# Feature Specification: フロントエンド作成

**Feature Branch**: `001-create-frontend`  
**Created**: 2026-02-13  
**Status**: Draft  

## Clarifications

### Session 2026-02-13

- Q: 通信方式（ユニット位置や割当の即時性）について → A: リアルタイム（WebSocket / Socket.IO）。フォールバックはポーリングを使用する。


## User Scenarios & Testing *(mandatory)*

### 背景と対象ユーザー
- **アクター**: ディスパッチャー（通報受付・現場割当担当）、指揮官／現場隊員（ユニットの位置確認）、運用管理者
- **目的**: インシデントの把握、ユニットの監視・割当、ディスパッチ操作をWeb上で実行できるようにする

### User Story 1 - インシデント一覧と詳細表示 (Priority: P1)

ディスパッチャーとして、受信したインシデントを一覧で素早く把握し、詳細を開いて状況を確認したい。

**Why this priority**: 受信→対応の流れの起点となるため最優先。

**Independent Test**: テスト用インシデントを投入し、一覧表示→詳細表示が可能であることを確認する。

**Acceptance Scenarios**:
1. **Given** ログイン済みのディスパッチャー、**When** インシデント画面に遷移、**Then** 最新のインシデントが時系列で表示される
2. **Given** 一覧の行を選択、**When** 詳細ボタンを押す、**Then** 位置・発生時刻・優先度・備考が表示される

---

### User Story 2 - ユニット位置と状態の確認 (Priority: P1)

ディスパッチャー/指揮官として、全ユニットの現在位置と状態（稼働/待機/出動中）を地図上／リストで確認したい。

**Why this priority**: 効率的な割当と指揮のため必須。

**Independent Test**: モックのGPSデータを用意し、各ユニットの位置とステータスが正しく表示されることを確認する。

**Acceptance Scenarios**:
1. **Given** ユニットが複数存在、**When** ユニット一覧を開く、**Then** 各ユニットの状態と最終位置が表示される
2. **Given** 地図表示、**When** ユニットを選択、**Then** ユニットの詳細と最近のGPSタイムスタンプが表示される

---

### User Story 3 - ディスパッチ（ユニット割当）ワークフロー (Priority: P2)

ディスパッチャーとして、インシデントに対してユニットを割り当て、割当履歴がトラッキングされることを望む。

**Why this priority**: 重要だが最小限のインタラクションで段階的に実装可能なためP2。

**Independent Test**: インシデントに対してユニットを割り当て、システムが割当イベントを記録することを確認する。

**Acceptance Scenarios**:
1. **Given** インシデント詳細、**When** ユニットを選択して割当ボタンを押す、**Then** 割当が登録される（一覧に反映）

---

### Edge Cases

- ネットワーク遅延や切断時のユーザー操作（操作後の再同期、失敗時の明示的エラー表示）
- 同一インシデントへの重複割当（競合）
- 大量のインシデントやユニットが存在する場合のページング/パフォーマンス

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: ユーザーはログイン後にインシデント一覧画面にアクセスできること
- **FR-002**: インシデント一覧は最新順（時刻）で並び、各行から詳細画面へ遷移できること
- **FR-003**: 地図上およびリストでユニットの位置と状態を確認できること
- **FR-004**: インシデントに対してユニットを割り当て／割当解除でき、その履歴が記録されること
- **FR-005**: 操作に対して成功/失敗のフィードバック（トーストやモーダル）を表示すること

**Integration & External Dependencies**

- **Real-time updates**: ユニット位置・割当イベント等の即時性が必要なデータは WebSocket（例: Socket.IO）を標準とする。互換性/可用性を考慮し、フォールバックとして短周期ポーリング（5–15秒）を実装する。

*注記: 対応プラットフォームを300cWeb + モバイル（Web を P1、モバイルは段階的に対応）300dと決定します。モバイルはネイティブ/ハイブリッド戦略を別途検討します。*